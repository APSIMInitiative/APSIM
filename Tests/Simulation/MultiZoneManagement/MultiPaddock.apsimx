{
  "$type": "Models.Core.Simulations, Models",
  "Version": 168,
  "Name": "Simulations",
  "ResourceName": null,
  "Children": [
    {
      "$type": "Models.Core.Folder, Models",
      "ShowInDocs": false,
      "GraphsPerPage": 6,
      "Name": "Replacements",
      "ResourceName": null,
      "Children": [],
      "Enabled": true,
      "ReadOnly": false
    },
    {
      "$type": "Models.Storage.DataStore, Models",
      "useFirebird": false,
      "CustomFileName": null,
      "Name": "DataStore",
      "ResourceName": null,
      "Children": [],
      "Enabled": true,
      "ReadOnly": false
    },
    {
      "$type": "Models.Core.Simulation, Models",
      "Descriptors": null,
      "Name": "Farm",
      "ResourceName": null,
      "Children": [
        {
          "$type": "Models.Clock, Models",
          "Start": "1990-01-01T00:00:00",
          "End": "1995-04-30T00:00:00",
          "Name": "Clock",
          "ResourceName": null,
          "Children": [],
          "Enabled": true,
          "ReadOnly": false
        },
        {
          "$type": "Models.Summary, Models",
          "Verbosity": 100,
          "Name": "SummaryFile",
          "ResourceName": null,
          "Children": [],
          "Enabled": true,
          "ReadOnly": false
        },
        {
          "$type": "Models.Climate.Weather, Models",
          "ConstantsFile": null,
          "FileName": "/home/uqpdevo1/src/ApsimX/Examples/WeatherFiles/Dalby.met",
          "ExcelWorkSheetName": "",
          "Name": "Weather",
          "ResourceName": null,
          "Children": [],
          "Enabled": true,
          "ReadOnly": false
        },
        {
          "$type": "Models.Soils.Arbitrator.SoilArbitrator, Models",
          "Name": "Soil Arbitrator",
          "ResourceName": null,
          "Children": [],
          "Enabled": true,
          "ReadOnly": false
        },
        {
          "$type": "Models.Core.Zone, Models",
          "Area": 1.0,
          "Slope": 0.0,
          "AspectAngle": 0.0,
          "Altitude": 50.0,
          "Name": "Field 1",
          "ResourceName": null,
          "Children": [
            {
              "$type": "Models.Soils.Soil, Models",
              "RecordNumber": 30,
              "ASCOrder": "Vertosol",
              "ASCSubOrder": "Black",
              "SoilType": "Clay",
              "LocalName": null,
              "Site": "Dalby",
              "NearestTown": "Dalby, Q 4405",
              "Region": "Darling Downs and Granite Belt",
              "State": "Queensland",
              "Country": "Australia",
              "NaturalVegetation": null,
              "ApsoilNumber": "27",
              "Latitude": -27.1229551,
              "Longitude": 151.3054008,
              "LocationAccuracy": " +/- 20m",
              "YearOfSampling": "0",
              "DataSource": "CSIRO Sustainable Ecosystems, Toowoomba",
              "Comments": "Clay - Toowoomba - Wheat ll,xf copied from sorghum. Wheat kl is just default apsim kl values for wheat. ",
              "Name": "Black Vertosol-Bongeen (Dalby No027)",
              "ResourceName": null,
              "Children": [
                {
                  "$type": "Models.Soils.Physical, Models",
                  "Thickness": [
                    150.0,
                    150.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0
                  ],
                  "ParticleSizeClay": null,
                  "ParticleSizeSand": null,
                  "ParticleSizeSilt": null,
                  "Rocks": null,
                  "Texture": null,
                  "BD": [
                    1.25,
                    1.31,
                    1.23,
                    1.24,
                    1.25,
                    1.26,
                    1.29
                  ],
                  "AirDry": [
                    0.115,
                    0.184,
                    0.23,
                    0.23,
                    0.23,
                    0.23,
                    0.23
                  ],
                  "LL15": [
                    0.23,
                    0.23,
                    0.23,
                    0.23,
                    0.23,
                    0.23,
                    0.23
                  ],
                  "DUL": [
                    0.45,
                    0.43,
                    0.46,
                    0.45,
                    0.45,
                    0.44,
                    0.43
                  ],
                  "SAT": [
                    0.5,
                    0.48,
                    0.51,
                    0.5,
                    0.5,
                    0.49,
                    0.48
                  ],
                  "KS": null,
                  "BDMetadata": [
                    "Field measured and checked for sensibility",
                    "Field measured and checked for sensibility",
                    "Field measured and checked for sensibility",
                    "Field measured and checked for sensibility",
                    "Field measured and checked for sensibility",
                    "Field measured and checked for sensibility",
                    "Field measured and checked for sensibility"
                  ],
                  "AirDryMetadata": [
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge"
                  ],
                  "LL15Metadata": [
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge"
                  ],
                  "DULMetadata": [
                    "Field measured and checked for sensibility",
                    "Field measured and checked for sensibility",
                    "Field measured and checked for sensibility",
                    "Field measured and checked for sensibility",
                    "Field measured and checked for sensibility",
                    "Field measured and checked for sensibility",
                    "Field measured and checked for sensibility"
                  ],
                  "SATMetadata": [
                    "Calculated from measured, estimated or calculated BD",
                    "Calculated from measured, estimated or calculated BD",
                    "Calculated from measured, estimated or calculated BD",
                    "Calculated from measured, estimated or calculated BD",
                    "Calculated from measured, estimated or calculated BD",
                    "Calculated from measured, estimated or calculated BD",
                    "Calculated from measured, estimated or calculated BD"
                  ],
                  "KSMetadata": null,
                  "RocksMetadata": null,
                  "TextureMetadata": null,
                  "ParticleSizeSandMetadata": null,
                  "ParticleSizeSiltMetadata": null,
                  "ParticleSizeClayMetadata": null,
                  "Name": "Physical",
                  "ResourceName": null,
                  "Children": [
                    {
                      "$type": "Models.Soils.SoilCrop, Models",
                      "LL": [
                        0.23,
                        0.24,
                        0.29,
                        0.34,
                        0.37,
                        0.38,
                        0.39
                      ],
                      "KL": [
                        0.06,
                        0.06,
                        0.06,
                        0.04,
                        0.04,
                        0.02,
                        0.01
                      ],
                      "XF": [
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0
                      ],
                      "LLMetadata": [
                        "Estimated based on local knowledge",
                        "Estimated based on local knowledge",
                        "Estimated based on local knowledge",
                        "Estimated based on local knowledge",
                        "Estimated based on local knowledge",
                        "Estimated based on local knowledge",
                        "Estimated based on local knowledge"
                      ],
                      "KLMetadata": null,
                      "XFMetadata": null,
                      "Name": "wheatSoil",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.SoilCrop, Models",
                      "LL": [
                        0.23,
                        0.23,
                        0.23,
                        0.26,
                        0.3,
                        0.33,
                        0.37
                      ],
                      "KL": [
                        0.1,
                        0.1,
                        0.1,
                        0.1,
                        0.09,
                        0.07,
                        0.05
                      ],
                      "XF": [
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0
                      ],
                      "LLMetadata": [
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility"
                      ],
                      "KLMetadata": null,
                      "XFMetadata": null,
                      "Name": "cottonSoil",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.SoilCrop, Models",
                      "LL": [
                        0.23,
                        0.24,
                        0.29,
                        0.34,
                        0.37,
                        0.38,
                        0.39
                      ],
                      "KL": [
                        0.07,
                        0.07,
                        0.07,
                        0.05,
                        0.05,
                        0.04,
                        0.03
                      ],
                      "XF": [
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0
                      ],
                      "LLMetadata": [
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility"
                      ],
                      "KLMetadata": null,
                      "XFMetadata": null,
                      "Name": "sorghumSoil",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.SoilCrop, Models",
                      "LL": [
                        0.23,
                        0.24,
                        0.29,
                        0.34,
                        0.37,
                        0.38,
                        0.39
                      ],
                      "KL": [
                        0.06,
                        0.06,
                        0.06,
                        0.04,
                        0.04,
                        0.02,
                        0.01
                      ],
                      "XF": [
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0
                      ],
                      "LLMetadata": [
                        "Estimated based on local knowledge",
                        "Estimated based on local knowledge",
                        "Estimated based on local knowledge",
                        "Estimated based on local knowledge",
                        "Estimated based on local knowledge",
                        "Estimated based on local knowledge",
                        "Estimated based on local knowledge"
                      ],
                      "KLMetadata": null,
                      "XFMetadata": null,
                      "Name": "SCRUMSoil",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.SoilCrop, Models",
                      "LL": [
                        0.23,
                        0.24,
                        0.29,
                        0.34,
                        0.37,
                        0.38,
                        0.39
                      ],
                      "KL": [
                        0.07,
                        0.07,
                        0.07,
                        0.05,
                        0.05,
                        0.04,
                        0.03
                      ],
                      "XF": [
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0
                      ],
                      "LLMetadata": [
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility"
                      ],
                      "KLMetadata": null,
                      "XFMetadata": null,
                      "Name": "MaizeSoil",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    }
                  ],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.WaterModel.WaterBalance, Models",
                  "SummerDate": "1-Nov",
                  "SummerU": 6.0,
                  "SummerCona": 3.5,
                  "WinterDate": "1-Apr",
                  "WinterU": 4.0,
                  "WinterCona": 2.5,
                  "DiffusConst": 40.0,
                  "DiffusSlope": 16.0,
                  "Salb": 0.12,
                  "CN2Bare": 73.0,
                  "CNRed": 20.0,
                  "CNCov": 0.8,
                  "DischargeWidth": "NaN",
                  "CatchmentArea": "NaN",
                  "PSIDul": -100.0,
                  "Thickness": [
                    150.0,
                    150.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0
                  ],
                  "SWCON": [
                    0.3,
                    0.3,
                    0.3,
                    0.3,
                    0.3,
                    0.3,
                    0.3
                  ],
                  "KLAT": null,
                  "Name": "SoilWater",
                  "ResourceName": "WaterBalance",
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Soils.Organic, Models",
                  "FOMCNRatio": 40.0,
                  "Thickness": [
                    150.0,
                    150.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0
                  ],
                  "Carbon": [
                    0.915384615384615,
                    0.776923076923077,
                    0.346153846153846,
                    0.230769230769231,
                    0.153846153846154,
                    0.123076923076923,
                    0.130769230769231
                  ],
                  "CarbonUnits": 1,
                  "SoilCNRatio": [
                    12.0,
                    12.0,
                    12.0,
                    12.0,
                    12.0,
                    12.0,
                    12.0
                  ],
                  "FBiom": [
                    0.04,
                    0.02,
                    0.02,
                    0.02,
                    0.01,
                    0.01,
                    0.01
                  ],
                  "FInert": [
                    0.4,
                    0.6,
                    0.8,
                    1.0,
                    1.0,
                    1.0,
                    1.0
                  ],
                  "FOM": [
                    347.1290323127564,
                    270.3443621919937,
                    163.97214434990104,
                    99.45413288704063,
                    60.32198083112468,
                    36.58713082867487,
                    22.1912165985086
                  ],
                  "CarbonMetadata": null,
                  "FOMMetadata": null,
                  "Name": "Organic",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Soils.Chemical, Models",
                  "Thickness": [
                    150.0,
                    150.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0
                  ],
                  "PH": [
                    8.2,
                    8.5,
                    8.6,
                    8.6,
                    7.4,
                    5.3,
                    5.3
                  ],
                  "PHUnits": 0,
                  "EC": null,
                  "ESP": null,
                  "CEC": null,
                  "ECMetadata": null,
                  "CLMetadata": null,
                  "ESPMetadata": null,
                  "PHMetadata": [
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge"
                  ],
                  "Name": "Chemical",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Soils.Nutrients.Nutrient, Models",
                  "Name": "Nutrient",
                  "ResourceName": "Nutrient",
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Soils.Solute, Models",
                  "Thickness": null,
                  "InitialValues": null,
                  "InitialValuesUnits": 0,
                  "WaterTableConcentration": 0.0,
                  "D0": 0.0,
                  "Exco": null,
                  "FIP": null,
                  "DepthConstant": 0.0,
                  "MaxDepthSoluteAccessible": 0.0,
                  "RunoffEffectivenessAtMovingSolute": 0.0,
                  "MaxEffectiveRunoff": 0.0,
                  "Name": "NO3",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Soils.Solute, Models",
                  "Thickness": null,
                  "InitialValues": null,
                  "InitialValuesUnits": 0,
                  "WaterTableConcentration": 0.0,
                  "D0": 0.0,
                  "Exco": null,
                  "FIP": null,
                  "DepthConstant": 0.0,
                  "MaxDepthSoluteAccessible": 0.0,
                  "RunoffEffectivenessAtMovingSolute": 0.0,
                  "MaxEffectiveRunoff": 0.0,
                  "Name": "NH4",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Soils.Solute, Models",
                  "Thickness": [
                    150.0,
                    150.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0
                  ],
                  "InitialValues": [
                    0.0,
                    0.0,
                    0.0,
                    0.0,
                    0.0,
                    0.0,
                    0.0
                  ],
                  "InitialValuesUnits": 1,
                  "WaterTableConcentration": 0.0,
                  "D0": 0.0,
                  "Exco": null,
                  "FIP": null,
                  "DepthConstant": 0.0,
                  "MaxDepthSoluteAccessible": 0.0,
                  "RunoffEffectivenessAtMovingSolute": 0.0,
                  "MaxEffectiveRunoff": 0.0,
                  "Name": "Urea",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Soils.Water, Models",
                  "Thickness": [
                    150.0,
                    150.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0
                  ],
                  "InitialValues": [
                    0.406,
                    0.39,
                    0.414,
                    0.406,
                    0.406,
                    0.398,
                    0.39
                  ],
                  "InitialPAWmm": 309.6,
                  "RelativeTo": "LL15",
                  "FilledFromTop": true,
                  "Name": "Water",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Soils.CERESSoilTemperature, Models",
                  "Name": "CERESSoilTemperature",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                }
              ],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Fertiliser, Models",
              "Name": "Fertiliser",
              "ResourceName": "Fertiliser",
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Surface.SurfaceOrganicMatter, Models",
              "SurfOM": [],
              "Canopies": [],
              "InitialResidueName": "wheat_stubble",
              "InitialResidueType": "wheat",
              "InitialResidueMass": 500.0,
              "InitialStandingFraction": 0.0,
              "InitialCPR": 0.0,
              "InitialCNR": 100.0,
              "Name": "SurfaceOrganicMatter",
              "ResourceName": "SurfaceOrganicMatter",
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.MicroClimate, Models",
              "a_interception": 0.0,
              "b_interception": 1.0,
              "c_interception": 0.0,
              "d_interception": 0.0,
              "SoilHeatFluxFraction": 0.4,
              "MinimumHeightDiffForNewLayer": 0.0,
              "NightInterceptionFraction": 0.5,
              "ReferenceHeight": 2.0,
              "Name": "MicroClimate",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.PMF.Plant, Models",
              "Name": "Maize",
              "ResourceName": "Maize",
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.PMF.Plant, Models",
              "Name": "Wheat",
              "ResourceName": "Wheat",
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Manager, Models",
              "CodeArray": [
                "using Models.Soils;",
                "using System.Linq;",
                "using System;",
                "using Models.Core;",
                "using Models.PMF;",
                "namespace Models",
                "{",
                "    [Serializable]",
                "    public class Script : Model",
                "    {",
                "        [Link] Clock Clock;",
                "        [Link] Fertiliser Fertiliser;",
                "        [Link] Summary Summary;",
                "        ",
                "        ",
                "        [Description(\"Amount of fertiliser to be applied (kg/ha)\")]",
                "        public double Amount { get; set;}",
                "        ",
                "        [Description(\"Crop to be fertilised\")]",
                "        public string CropName { get; set;}",
                "        ",
                "        ",
                "        ",
                "",
                "        [EventSubscribe(\"Sowing\")]",
                "        private void OnSowing(object sender, EventArgs e)",
                "        {",
                "            Model crop = sender as Model;",
                "            if (crop.Name.ToLower()==CropName.ToLower())",
                "                Fertiliser.Apply(Amount: Amount, Type: Fertiliser.Types.NO3N);",
                "        }",
                "        ",
                "    }",
                "}"
              ],
              "Parameters": [
                {
                  "Key": "Amount",
                  "Value": "160"
                },
                {
                  "Key": "CropName",
                  "Value": "maize"
                }
              ],
              "Name": "SowingFertiliserMaize",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Manager, Models",
              "CodeArray": [
                "using Models.Soils;",
                "using System.Linq;",
                "using System;",
                "using Models.Core;",
                "using Models.PMF;",
                "namespace Models",
                "{",
                "    [Serializable]",
                "    public class Script : Model",
                "    {",
                "        [Link] Clock Clock;",
                "        [Link] Fertiliser Fertiliser;",
                "        [Link] Summary Summary;",
                "        ",
                "        ",
                "        [Description(\"Amount of fertiliser to be applied (kg/ha)\")]",
                "        public double Amount { get; set;}",
                "        ",
                "        [Description(\"Crop to be fertilised\")]",
                "        public string CropName { get; set;}",
                "        ",
                "        ",
                "        ",
                "",
                "        [EventSubscribe(\"Sowing\")]",
                "        private void OnSowing(object sender, EventArgs e)",
                "        {",
                "            Model crop = sender as Model;",
                "            if (crop.Name.ToLower()==CropName.ToLower())",
                "                Fertiliser.Apply(Amount: Amount, Type: Fertiliser.Types.NO3N);",
                "        }",
                "        ",
                "    }",
                "}"
              ],
              "Parameters": [
                {
                  "Key": "Amount",
                  "Value": "160"
                },
                {
                  "Key": "CropName",
                  "Value": "wheat"
                }
              ],
              "Name": "SowingFertiliserWheat",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Report, Models",
              "VariableNames": [
                "[Clock].Today",
                "[Manager].Script.CurrentStateCSV as CurrentState",
                "[Wheat].Phenology.Zadok.Stage",
                "[Wheat].Phenology.CurrentStageName",
                "[Wheat].IsAlive",
                "[Wheat].IsReadyForHarvesting",
                "[Wheat].AboveGround.Wt",
                "[Wheat].AboveGround.N",
                "[Wheat].Grain.Total.Wt*10 as WheatYield",
                "[Maize].Grain.Total.Wt*10 as MaizeYield",
                "[Wheat].Grain.Protein",
                "[Wheat].Grain.Size",
                "[Wheat].Grain.Number",
                "[Wheat].Grain.Total.Wt",
                "[Wheat].Grain.Total.N",
                "[Wheat].Total.Wt",
                "",
                "Sum([Soil].SoilWater.ESW) as ESW",
                "[Soil].SoilWater.Es as ESoil"
              ],
              "EventNames": [
                "[Clock].EndOfDay"
              ],
              "GroupByVariableName": null,
              "Name": "Report",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            }
          ],
          "Enabled": true,
          "ReadOnly": false
        },
        {
          "$type": "Models.Core.Zone, Models",
          "Area": 1.0,
          "Slope": 0.0,
          "AspectAngle": 0.0,
          "Altitude": 50.0,
          "Name": "Field 2",
          "ResourceName": null,
          "Children": [
            {
              "$type": "Models.Soils.Soil, Models",
              "RecordNumber": 30,
              "ASCOrder": "Vertosol",
              "ASCSubOrder": "Black",
              "SoilType": "Clay",
              "LocalName": null,
              "Site": "Dalby",
              "NearestTown": "Dalby, Q 4405",
              "Region": "Darling Downs and Granite Belt",
              "State": "Queensland",
              "Country": "Australia",
              "NaturalVegetation": null,
              "ApsoilNumber": "27",
              "Latitude": -27.1229551,
              "Longitude": 151.3054008,
              "LocationAccuracy": " +/- 20m",
              "YearOfSampling": "0",
              "DataSource": "CSIRO Sustainable Ecosystems, Toowoomba",
              "Comments": "Clay - Toowoomba - Wheat ll,xf copied from sorghum. Wheat kl is just default apsim kl values for wheat. ",
              "Name": "Black Vertosol-Bongeen (Dalby No027)",
              "ResourceName": null,
              "Children": [
                {
                  "$type": "Models.Soils.Physical, Models",
                  "Thickness": [
                    150.0,
                    150.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0
                  ],
                  "ParticleSizeClay": null,
                  "ParticleSizeSand": null,
                  "ParticleSizeSilt": null,
                  "Rocks": null,
                  "Texture": null,
                  "BD": [
                    1.25,
                    1.31,
                    1.23,
                    1.24,
                    1.25,
                    1.26,
                    1.29
                  ],
                  "AirDry": [
                    0.115,
                    0.184,
                    0.23,
                    0.23,
                    0.23,
                    0.23,
                    0.23
                  ],
                  "LL15": [
                    0.23,
                    0.23,
                    0.23,
                    0.23,
                    0.23,
                    0.23,
                    0.23
                  ],
                  "DUL": [
                    0.45,
                    0.43,
                    0.46,
                    0.45,
                    0.45,
                    0.44,
                    0.43
                  ],
                  "SAT": [
                    0.5,
                    0.48,
                    0.51,
                    0.5,
                    0.5,
                    0.49,
                    0.48
                  ],
                  "KS": null,
                  "BDMetadata": [
                    "Field measured and checked for sensibility",
                    "Field measured and checked for sensibility",
                    "Field measured and checked for sensibility",
                    "Field measured and checked for sensibility",
                    "Field measured and checked for sensibility",
                    "Field measured and checked for sensibility",
                    "Field measured and checked for sensibility"
                  ],
                  "AirDryMetadata": [
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge"
                  ],
                  "LL15Metadata": [
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge"
                  ],
                  "DULMetadata": [
                    "Field measured and checked for sensibility",
                    "Field measured and checked for sensibility",
                    "Field measured and checked for sensibility",
                    "Field measured and checked for sensibility",
                    "Field measured and checked for sensibility",
                    "Field measured and checked for sensibility",
                    "Field measured and checked for sensibility"
                  ],
                  "SATMetadata": [
                    "Calculated from measured, estimated or calculated BD",
                    "Calculated from measured, estimated or calculated BD",
                    "Calculated from measured, estimated or calculated BD",
                    "Calculated from measured, estimated or calculated BD",
                    "Calculated from measured, estimated or calculated BD",
                    "Calculated from measured, estimated or calculated BD",
                    "Calculated from measured, estimated or calculated BD"
                  ],
                  "KSMetadata": null,
                  "RocksMetadata": null,
                  "TextureMetadata": null,
                  "ParticleSizeSandMetadata": null,
                  "ParticleSizeSiltMetadata": null,
                  "ParticleSizeClayMetadata": null,
                  "Name": "Physical",
                  "ResourceName": null,
                  "Children": [
                    {
                      "$type": "Models.Soils.SoilCrop, Models",
                      "LL": [
                        0.23,
                        0.24,
                        0.29,
                        0.34,
                        0.37,
                        0.38,
                        0.39
                      ],
                      "KL": [
                        0.06,
                        0.06,
                        0.06,
                        0.04,
                        0.04,
                        0.02,
                        0.01
                      ],
                      "XF": [
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0
                      ],
                      "LLMetadata": [
                        "Estimated based on local knowledge",
                        "Estimated based on local knowledge",
                        "Estimated based on local knowledge",
                        "Estimated based on local knowledge",
                        "Estimated based on local knowledge",
                        "Estimated based on local knowledge",
                        "Estimated based on local knowledge"
                      ],
                      "KLMetadata": null,
                      "XFMetadata": null,
                      "Name": "wheatSoil",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.SoilCrop, Models",
                      "LL": [
                        0.23,
                        0.23,
                        0.23,
                        0.26,
                        0.3,
                        0.33,
                        0.37
                      ],
                      "KL": [
                        0.1,
                        0.1,
                        0.1,
                        0.1,
                        0.09,
                        0.07,
                        0.05
                      ],
                      "XF": [
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0
                      ],
                      "LLMetadata": [
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility"
                      ],
                      "KLMetadata": null,
                      "XFMetadata": null,
                      "Name": "cottonSoil",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.SoilCrop, Models",
                      "LL": [
                        0.23,
                        0.24,
                        0.29,
                        0.34,
                        0.37,
                        0.38,
                        0.39
                      ],
                      "KL": [
                        0.07,
                        0.07,
                        0.07,
                        0.05,
                        0.05,
                        0.04,
                        0.03
                      ],
                      "XF": [
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0
                      ],
                      "LLMetadata": [
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility"
                      ],
                      "KLMetadata": null,
                      "XFMetadata": null,
                      "Name": "sorghumSoil",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.SoilCrop, Models",
                      "LL": [
                        0.23,
                        0.24,
                        0.29,
                        0.34,
                        0.37,
                        0.38,
                        0.39
                      ],
                      "KL": [
                        0.06,
                        0.06,
                        0.06,
                        0.04,
                        0.04,
                        0.02,
                        0.01
                      ],
                      "XF": [
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0
                      ],
                      "LLMetadata": [
                        "Estimated based on local knowledge",
                        "Estimated based on local knowledge",
                        "Estimated based on local knowledge",
                        "Estimated based on local knowledge",
                        "Estimated based on local knowledge",
                        "Estimated based on local knowledge",
                        "Estimated based on local knowledge"
                      ],
                      "KLMetadata": null,
                      "XFMetadata": null,
                      "Name": "SCRUMSoil",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    },
                    {
                      "$type": "Models.Soils.SoilCrop, Models",
                      "LL": [
                        0.23,
                        0.24,
                        0.29,
                        0.34,
                        0.37,
                        0.38,
                        0.39
                      ],
                      "KL": [
                        0.07,
                        0.07,
                        0.07,
                        0.05,
                        0.05,
                        0.04,
                        0.03
                      ],
                      "XF": [
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0,
                        1.0
                      ],
                      "LLMetadata": [
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility",
                        "Field measured and checked for sensibility"
                      ],
                      "KLMetadata": null,
                      "XFMetadata": null,
                      "Name": "MaizeSoil",
                      "ResourceName": null,
                      "Children": [],
                      "Enabled": true,
                      "ReadOnly": false
                    }
                  ],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.WaterModel.WaterBalance, Models",
                  "SummerDate": "1-Nov",
                  "SummerU": 6.0,
                  "SummerCona": 3.5,
                  "WinterDate": "1-Apr",
                  "WinterU": 4.0,
                  "WinterCona": 2.5,
                  "DiffusConst": 40.0,
                  "DiffusSlope": 16.0,
                  "Salb": 0.12,
                  "CN2Bare": 73.0,
                  "CNRed": 20.0,
                  "CNCov": 0.8,
                  "DischargeWidth": "NaN",
                  "CatchmentArea": "NaN",
                  "PSIDul": -100.0,
                  "Thickness": [
                    150.0,
                    150.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0
                  ],
                  "SWCON": [
                    0.3,
                    0.3,
                    0.3,
                    0.3,
                    0.3,
                    0.3,
                    0.3
                  ],
                  "KLAT": null,
                  "Name": "SoilWater",
                  "ResourceName": "WaterBalance",
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Soils.Organic, Models",
                  "FOMCNRatio": 40.0,
                  "Thickness": [
                    150.0,
                    150.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0
                  ],
                  "Carbon": [
                    0.915384615384615,
                    0.776923076923077,
                    0.346153846153846,
                    0.230769230769231,
                    0.153846153846154,
                    0.123076923076923,
                    0.130769230769231
                  ],
                  "CarbonUnits": 1,
                  "SoilCNRatio": [
                    12.0,
                    12.0,
                    12.0,
                    12.0,
                    12.0,
                    12.0,
                    12.0
                  ],
                  "FBiom": [
                    0.04,
                    0.02,
                    0.02,
                    0.02,
                    0.01,
                    0.01,
                    0.01
                  ],
                  "FInert": [
                    0.4,
                    0.6,
                    0.8,
                    1.0,
                    1.0,
                    1.0,
                    1.0
                  ],
                  "FOM": [
                    347.1290323127564,
                    270.3443621919937,
                    163.97214434990104,
                    99.45413288704063,
                    60.32198083112468,
                    36.58713082867487,
                    22.1912165985086
                  ],
                  "CarbonMetadata": null,
                  "FOMMetadata": null,
                  "Name": "Organic",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Soils.Chemical, Models",
                  "Thickness": [
                    150.0,
                    150.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0
                  ],
                  "PH": [
                    8.2,
                    8.5,
                    8.6,
                    8.6,
                    7.4,
                    5.3,
                    5.3
                  ],
                  "PHUnits": 0,
                  "EC": null,
                  "ESP": null,
                  "CEC": null,
                  "ECMetadata": null,
                  "CLMetadata": null,
                  "ESPMetadata": null,
                  "PHMetadata": [
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge",
                    "Estimated based on local knowledge"
                  ],
                  "Name": "Chemical",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Soils.Nutrients.Nutrient, Models",
                  "Name": "Nutrient",
                  "ResourceName": "Nutrient",
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Soils.Solute, Models",
                  "Thickness": null,
                  "InitialValues": null,
                  "InitialValuesUnits": 0,
                  "WaterTableConcentration": 0.0,
                  "D0": 0.0,
                  "Exco": null,
                  "FIP": null,
                  "DepthConstant": 0.0,
                  "MaxDepthSoluteAccessible": 0.0,
                  "RunoffEffectivenessAtMovingSolute": 0.0,
                  "MaxEffectiveRunoff": 0.0,
                  "Name": "NO3",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Soils.Solute, Models",
                  "Thickness": null,
                  "InitialValues": null,
                  "InitialValuesUnits": 0,
                  "WaterTableConcentration": 0.0,
                  "D0": 0.0,
                  "Exco": null,
                  "FIP": null,
                  "DepthConstant": 0.0,
                  "MaxDepthSoluteAccessible": 0.0,
                  "RunoffEffectivenessAtMovingSolute": 0.0,
                  "MaxEffectiveRunoff": 0.0,
                  "Name": "NH4",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Soils.Solute, Models",
                  "Thickness": [
                    150.0,
                    150.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0
                  ],
                  "InitialValues": [
                    0.0,
                    0.0,
                    0.0,
                    0.0,
                    0.0,
                    0.0,
                    0.0
                  ],
                  "InitialValuesUnits": 1,
                  "WaterTableConcentration": 0.0,
                  "D0": 0.0,
                  "Exco": null,
                  "FIP": null,
                  "DepthConstant": 0.0,
                  "MaxDepthSoluteAccessible": 0.0,
                  "RunoffEffectivenessAtMovingSolute": 0.0,
                  "MaxEffectiveRunoff": 0.0,
                  "Name": "Urea",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Soils.Water, Models",
                  "Thickness": [
                    150.0,
                    150.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0,
                    300.0
                  ],
                  "InitialValues": [
                    0.406,
                    0.39,
                    0.414,
                    0.406,
                    0.406,
                    0.398,
                    0.39
                  ],
                  "InitialPAWmm": 309.6,
                  "RelativeTo": "LL15",
                  "FilledFromTop": true,
                  "Name": "Water",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                },
                {
                  "$type": "Models.Soils.CERESSoilTemperature, Models",
                  "Name": "CERESSoilTemperature",
                  "ResourceName": null,
                  "Children": [],
                  "Enabled": true,
                  "ReadOnly": false
                }
              ],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Fertiliser, Models",
              "Name": "Fertiliser",
              "ResourceName": "Fertiliser",
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Surface.SurfaceOrganicMatter, Models",
              "SurfOM": [],
              "Canopies": [],
              "InitialResidueName": "wheat_stubble",
              "InitialResidueType": "wheat",
              "InitialResidueMass": 500.0,
              "InitialStandingFraction": 0.0,
              "InitialCPR": 0.0,
              "InitialCNR": 100.0,
              "Name": "SurfaceOrganicMatter",
              "ResourceName": "SurfaceOrganicMatter",
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.MicroClimate, Models",
              "a_interception": 0.0,
              "b_interception": 1.0,
              "c_interception": 0.0,
              "d_interception": 0.0,
              "SoilHeatFluxFraction": 0.4,
              "MinimumHeightDiffForNewLayer": 0.0,
              "NightInterceptionFraction": 0.5,
              "ReferenceHeight": 2.0,
              "Name": "MicroClimate",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.PMF.Plant, Models",
              "Name": "Maize",
              "ResourceName": "Maize",
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.PMF.Plant, Models",
              "Name": "Wheat",
              "ResourceName": "Wheat",
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Manager, Models",
              "CodeArray": [
                "using Models.Soils;",
                "using System.Linq;",
                "using System;",
                "using Models.Core;",
                "using Models.PMF;",
                "namespace Models",
                "{",
                "    [Serializable]",
                "    public class Script : Model",
                "    {",
                "        [Link] Clock Clock;",
                "        [Link] Fertiliser Fertiliser;",
                "        [Link] Summary Summary;",
                "        ",
                "        ",
                "        [Description(\"Amount of fertiliser to be applied (kg/ha)\")]",
                "        public double Amount { get; set;}",
                "        ",
                "        [Description(\"Crop to be fertilised\")]",
                "        public string CropName { get; set;}",
                "        ",
                "        ",
                "        ",
                "",
                "        [EventSubscribe(\"Sowing\")]",
                "        private void OnSowing(object sender, EventArgs e)",
                "        {",
                "            Model crop = sender as Model;",
                "            if (crop.Name.ToLower()==CropName.ToLower())",
                "                Fertiliser.Apply(Amount: Amount, Type: Fertiliser.Types.NO3N);",
                "        }",
                "        ",
                "    }",
                "}"
              ],
              "Parameters": [
                {
                  "Key": "Amount",
                  "Value": "160"
                },
                {
                  "Key": "CropName",
                  "Value": "maize"
                }
              ],
              "Name": "SowingFertiliserMaize",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Manager, Models",
              "CodeArray": [
                "using Models.Soils;",
                "using System.Linq;",
                "using System;",
                "using Models.Core;",
                "using Models.PMF;",
                "namespace Models",
                "{",
                "    [Serializable]",
                "    public class Script : Model",
                "    {",
                "        [Link] Clock Clock;",
                "        [Link] Fertiliser Fertiliser;",
                "        [Link] Summary Summary;",
                "        ",
                "        ",
                "        [Description(\"Amount of fertiliser to be applied (kg/ha)\")]",
                "        public double Amount { get; set;}",
                "        ",
                "        [Description(\"Crop to be fertilised\")]",
                "        public string CropName { get; set;}",
                "        ",
                "        ",
                "        ",
                "",
                "        [EventSubscribe(\"Sowing\")]",
                "        private void OnSowing(object sender, EventArgs e)",
                "        {",
                "            Model crop = sender as Model;",
                "            if (crop.Name.ToLower()==CropName.ToLower())",
                "                Fertiliser.Apply(Amount: Amount, Type: Fertiliser.Types.NO3N);",
                "        }",
                "        ",
                "    }",
                "}"
              ],
              "Parameters": [
                {
                  "Key": "Amount",
                  "Value": "160"
                },
                {
                  "Key": "CropName",
                  "Value": "wheat"
                }
              ],
              "Name": "SowingFertiliserWheat",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            },
            {
              "$type": "Models.Report, Models",
              "VariableNames": [
                "[Clock].Today",
                "[Manager].Script.CurrentStateCSV as CurrentState",
                "[Wheat].Phenology.Zadok.Stage",
                "[Wheat].Phenology.CurrentStageName",
                "[Wheat].IsAlive",
                "[Wheat].IsReadyForHarvesting",
                "[Wheat].AboveGround.Wt",
                "[Wheat].AboveGround.N",
                "[Wheat].Grain.Total.Wt*10 as WheatYield",
                "[Maize].Grain.Total.Wt*10 as MaizeYield",
                "[Wheat].Grain.Protein",
                "[Wheat].Grain.Size",
                "[Wheat].Grain.Number",
                "[Wheat].Grain.Total.Wt",
                "[Wheat].Grain.Total.N",
                "[Wheat].Total.Wt",
                "",
                "Sum([Soil].SoilWater.ESW) as ESW",
                "[Soil].SoilWater.Es as ESoil"
              ],
              "EventNames": [
                "[Clock].EndOfDay"
              ],
              "GroupByVariableName": null,
              "Name": "Report",
              "ResourceName": null,
              "Children": [],
              "Enabled": true,
              "ReadOnly": false
            }
          ],
          "Enabled": true,
          "ReadOnly": false
        },
        {
          "$type": "Models.Manager, Models",
          "CodeArray": [
            "using System;",
            "using System.Linq;",
            "using System.Collections.Generic;",
            "using Models.Core;",
            "using Models.Interfaces;",
            "using Models.PMF;",
            "using Models.Soils;",
            "using Models.WaterModel;",
            "using Models.Soils.Nutrients;",
            "using Models.Management;",
            "using Models.Utilities;",
            "using Models.Climate;",
            "using APSIM.Shared.Utilities;",
            "",
            "namespace Models",
            "{",
            "    [Serializable]",
            "    public class Script : Model",
            "    {",
            "        [Link] private Clock Clock;",
            "        [Link] private Summary Summary;",
            "        [Link] private RotationManager RotationManager;",
            "        [NonSerialized] private Events myEvents;",
            "",
            "        private bool afterInit = false;",
            "        ",
            "        public string currentPaddock = \"\";",
            "        ",
            "        public List<string> myPaddockNames = new List<string> { \"Field 1\", \"Field 2\" };",
            "        ",
            "        public Dictionary<string, string> initialStates = new Dictionary<string, string> { {\"Field 1\", \"initial\"}, {\"Field 2\",\"summer fallow\"}};",
            "",
            "        private Dictionary<string, Accumulator> accumulatedRain;",
            "        private Dictionary<string, Zone> myPaddockZones;",
            "        private Dictionary<string, WaterBalance> myWaterBalances;",
            "        private Dictionary<string, string> currentState;",
            "        ",
            "        public string CurrentStateCSV {get { return string.Join(\",\", currentState.Values);} set {}}",
            "           ",
            "        [EventSubscribe(\"StartOfSimulation\")]",
            "        private void OnSimulationCommencing(object sender, EventArgs e)",
            "        {",
            "            afterInit = true;",
            "            accumulatedRain = new Dictionary<string, Accumulator>();",
            "            foreach (var crop in cropDefaults.Keys) {",
            "               accumulatedRain.Add(crop, new Accumulator(this, \"[Weather].Rain\", cropDefaults[crop].RainDays));",
            "            }",
            "            myEvents = new Events(this);",
            "            ",
            "            myPaddockZones = new Dictionary<string, Zone>();",
            "            myWaterBalances = new Dictionary<string, WaterBalance>();",
            "            currentState = new Dictionary<string, string>();",
            "            foreach (var paddock in myPaddockNames) {",
            "                myPaddockZones[ paddock ] = FindInScope(paddock) as Zone; ",
            "                if (myPaddockZones[ paddock ]  == null) { throw new Exception(\"Can't find a paddock called '\" + paddock + \"'\");}",
            " ",
            "                myWaterBalances[ paddock ] = myPaddockZones[ paddock ].FindInScope(\"SoilWater\") as WaterBalance;",
            "                if (myWaterBalances[ paddock ] == null) { throw new Exception(\"Can't find a waterbalance in '\" + paddock + \"'\");}",
            "                ",
            "                currentState[paddock] = initialStates[paddock];",
            "            }",
            "        }",
            "",
            "        public int eventcount;",
            "        [EventSubscribe(\"StartOfDay\")]",
            "        private void DoStartOfDay(object sender, EventArgs e) ",
            "        {",
            "            eventcount = 0;",
            "        }",
            "",
            "        [EventSubscribe(\"DoManagement\")]",
            "        private void DoManagement(object sender, EventArgs e)",
            "        {",
            "            if (eventcount++ > 20) { throw new Exception(\"Too many events\"); }",
            "            if (sender == this) {return;}",
            "",
            "            foreach (var crop in cropDefaults.Keys) {",
            "               accumulatedRain[crop].Update();",
            "            }",
            "            ",
            "            // while (moreToDo) ...",
            "            foreach (var paddock in myPaddockNames) {",
            "                currentPaddock = paddock;",
            "                RotationManager.CurrentState = currentState[paddock];",
            "                //Summary.WriteMessage(this, $\"Publishing {currentPaddock}\", MessageType.Diagnostic);",
            "                // fixme. This goes out to every subscriber, we want it to be just the rotation manager 2 lines above..",
            "                myEvents.Publish(\"DoManagement\", new object[] { this, EventArgs.Empty  });",
            "                currentState[paddock] = RotationManager.CurrentState;",
            "            }",
            "            currentPaddock = \"\";",
            "        }",
            "        ",
            "        // Occurs after all management is doe",
            "        [EventSubscribe(\"DoManagementCalculations\")]",
            "        private void DoManagementCalculations(object sender, EventArgs e)",
            "        {",
            "            ",
            "        }",
            "",
            "        public double CanSowWheat {get { return(canSow(\"Wheat\")); } set {} }",
            "        public double CanSowMaize {get { return(canSow(\"Maize\")); } set {} }",
            "         ",
            "        public double CanHarvestWheat {get { return(canHarvest(\"Wheat\")); } set {} }",
            "        public double CanHarvestMaize {get { return(canHarvest(\"Maize\")); } set {} }",
            "",
            "        private double canSow (string crop) {",
            "            if (currentPaddock == \"\") { /*Summary.WriteMessage(this, $\"No paddock set for canSow\", MessageType.Diagnostic);*/ return 0; }",
            "            //Summary.WriteMessage(this, $\"Being asked for crop {crop} in {currentPaddock}\", MessageType.Diagnostic);",
            "            var Crop = findMyCrop(crop);",
            "            ",
            "",
            "            if ((DateUtilities.WithinDates(cropDefaults[crop].StartDate, Clock.Today, cropDefaults[crop].EndDate) &&",
            "                 !Crop.IsAlive &&",
            "                 MathUtilities.Sum(myWaterBalances[currentPaddock].ESW) > cropDefaults[crop].MinESW &&",
            "                 accumulatedRain[crop].Sum > cropDefaults[crop].MinRain) ||",
            "                (!Crop.IsAlive && DateUtilities.DatesAreEqual(cropDefaults[crop].EndDate, Clock.Today) && cropDefaults[crop].MustSow)) ",
            "                 {",
            "                return 1; ",
            "            }",
            "            return 0; ",
            "        }",
            "               ",
            "        private double canHarvest (string crop) {",
            "            if (currentPaddock == \"\") {/*Summary.WriteMessage(this, $\"No paddock set for canHarvest\", MessageType.Diagnostic);*/ return 0; }",
            "            var Crop = findMyCrop(crop);",
            "            if (Crop.IsReadyForHarvesting) {",
            "               return(1);",
            "            }",
            "            return(0);   ",
            "        }",
            "               ",
            "        public void SowCrop(string crop) ",
            "        {   ",
            "            crop = crop.Replace(\"\\\"\", \"\"); //NFI why the quotes are added in??",
            "            var Crop = findMyCrop(crop);",
            "            Summary.WriteMessage(this, this.FullPath + \" -  sowing \" + Crop.FullPath, MessageType.Diagnostic);",
            "            Crop.Sow(population: cropDefaults[crop].Population, cultivar: cropDefaults[crop].CultivarName, ",
            "                     depth: cropDefaults[crop].SowingDepth, rowSpacing: cropDefaults[crop].RowSpacing);    ",
            "        }",
            "        ",
            "        public void HarvestCrop(string crop)",
            "        {",
            "            crop = crop.Replace(\"\\\"\", \"\");",
            "            var Crop = findMyCrop(crop);",
            "            Summary.WriteMessage(this, this.FullPath + \" -  harvesting \" + Crop.FullPath, MessageType.Diagnostic);",
            "            Crop.Harvest();",
            "            Crop.EndCrop();",
            "        }",
            "",
            "        private IPlant findMyCrop(string crop) {",
            "            var myPaddock = FindInScope(currentPaddock) as Zone; ",
            "            if (myPaddock == null) { throw new Exception(\"Can't find a paddock called '\" + currentPaddock + \"'\");}",
            "            ",
            "            IPlant Crop = myPaddock.FindInScope(crop) as IPlant;",
            "            if (Crop == null) { throw new Exception(\"Can't find crop called '\" + currentPaddock + \".\" + crop + \"'\");}",
            "            return (Crop);        ",
            "        }",
            "        ",
            "        public int AreaPlantedOk (string Crop) {",
            "           //Summary.WriteMessage(this, $\"Being asked area for crop {Crop}\", MessageType.Diagnostic);",
            "           return(1);        ",
            "        }",
            "        ",
            "        private class cropDefault {",
            "           public int RainDays;",
            "           public string StartDate;",
            "           public string EndDate;",
            "           public double MinRain;",
            "           public double MinESW;",
            "           public bool MustSow;",
            "           public double Population;",
            "           public string CultivarName;",
            "           public double SowingDepth;",
            "           public double RowSpacing;",
            "           public double maxArea;",
            "        }",
            "        ",
            "        [NonSerialized]",
            "        private static readonly Dictionary<string, cropDefault> cropDefaults = new Dictionary<string, cropDefault> { ",
            "           {\"Wheat\", new cropDefault {StartDate = \"1-apr\", EndDate = \"10-jun\", RainDays = 7, MinRain = 10, MinESW = 50, MustSow = true,  ",
            "                                      CultivarName = \"hartog\", Population = 50, SowingDepth = 30, RowSpacing = 250,",
            "                                      maxArea = 0.5 }},",
            "           {\"Maize\", new cropDefault {StartDate = \"1-nov\", EndDate = \"30-dec\", RainDays = 7, MinRain = 20, MinESW = 80, MustSow = true,",
            "                                      CultivarName = \"sc501\", Population =  6, SowingDepth = 50, RowSpacing = 1000,",
            "                                      maxArea = 0.5 }}",
            "        };",
            "   }",
            "}"
          ],
          "Parameters": [],
          "Name": "Manager",
          "ResourceName": null,
          "Children": [],
          "Enabled": true,
          "ReadOnly": false
        },
        {
          "$type": "Models.Management.RotationManager, Models",
          "Nodes": [
            {
              "$type": "Models.Management.StateNode, Models",
              "Description": null,
              "Name": "summer fallow",
              "Location": "441, 214",
              "Colour": "Yellow",
              "OutlineColour": "Black",
              "Transparent": false
            },
            {
              "$type": "Models.Management.StateNode, Models",
              "Description": null,
              "Name": "Wheat",
              "Location": "256, 50",
              "Colour": "Red",
              "OutlineColour": "Black",
              "Transparent": false
            },
            {
              "$type": "Models.Management.StateNode, Models",
              "Description": null,
              "Name": "Maize",
              "Location": "246, 386",
              "Colour": "96, 96, 217",
              "OutlineColour": "Black",
              "Transparent": false
            },
            {
              "$type": "Models.Management.StateNode, Models",
              "Description": null,
              "Name": "initial",
              "Location": "76, 214",
              "Colour": "Lime",
              "OutlineColour": "Black",
              "Transparent": false
            }
          ],
          "Arcs": [
            {
              "$type": "Models.Management.RuleAction, Models",
              "Conditions": [
                "[Manager].Script.CanHarvestWheat"
              ],
              "Actions": [
                "[Manager].Script.HarvestCrop(\"Wheat\");"
              ],
              "SourceName": "Wheat",
              "DestinationName": "summer fallow",
              "Location": "465, 49",
              "Colour": "Yellow",
              "Name": "Arc 1"
            },
            {
              "$type": "Models.Management.RuleAction, Models",
              "Conditions": [
                "[Manager].Script.CanSowMaize"
              ],
              "Actions": [
                "[Manager].Script.SowCrop(\"Maize\");"
              ],
              "SourceName": "summer fallow",
              "DestinationName": "Maize",
              "Location": "443, 418",
              "Colour": "Yellow",
              "Name": "Arc 2"
            },
            {
              "$type": "Models.Management.RuleAction, Models",
              "Conditions": [
                "[Manager].Script.CanHarvestMaize"
              ],
              "Actions": [
                "[Manager].Script.HarvestCrop(\"Maize\");"
              ],
              "SourceName": "Maize",
              "DestinationName": "initial",
              "Location": "34, 377",
              "Colour": "Yellow",
              "Name": "Arc 3"
            },
            {
              "$type": "Models.Management.RuleAction, Models",
              "Conditions": [
                "[Manager].Script.CanSowWheat",
                "[Manager].Script.AreaPlantedOk(\"Wheat\")"
              ],
              "Actions": [
                "[Manager].Script.SowCrop(\"Wheat\");"
              ],
              "SourceName": "initial",
              "DestinationName": "Wheat",
              "Location": "72, 22",
              "Colour": "Yellow",
              "Name": "Arc 4"
            }
          ],
          "InitialState": "initial",
          "Verbose": false,
          "Name": "RotationManager",
          "ResourceName": null,
          "Children": [],
          "Enabled": true,
          "ReadOnly": false
        },
        {
          "$type": "Models.Report, Models",
          "VariableNames": [
            "[Clock].Today",
            "[Clock].Today.DayOfYear",
            "[Manager].Script.CurrentStateCSV as CurrentState"
          ],
          "EventNames": [
            "[RotationManager].Transition"
          ],
          "GroupByVariableName": null,
          "Name": "TransitionReport",
          "ResourceName": null,
          "Children": [],
          "Enabled": true,
          "ReadOnly": false
        }
      ],
      "Enabled": true,
      "ReadOnly": false
    }
  ],
  "Enabled": true,
  "ReadOnly": false
}